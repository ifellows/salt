<% var body = ` 
<h2>Dashboard</h2>

<div class="stats">
    <div class="stat-card">
        <div class="stat-value">${stats.total_facilities}</div>
        <div class="stat-label">Total Facilities</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">${stats.total_uploads}</div>
        <div class="stat-label">Total Uploads</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">${stats.completed_uploads}</div>
        <div class="stat-label">Completed</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">${stats.failed_uploads}</div>
        <div class="stat-label">Failed</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">${stats.today_uploads}</div>
        <div class="stat-label">Today's Uploads</div>
    </div>
</div>

<div class="card">
    <h3 style="margin-bottom: 1rem;">Recent Uploads</h3>
    <table>
        <thead>
            <tr>
                <th>Survey ID</th>
                <th>Facility</th>
                <th>Status</th>
                <th>Upload Time</th>
            </tr>
        </thead>
        <tbody>
            ${recentUploads.map(upload => `
                <tr>
                    <td>${upload.survey_response_id}</td>
                    <td>${upload.facility_name || 'Unknown'}</td>
                    <td>
                        <span style="color: ${upload.status === 'completed' ? 'green' : 'red'}">
                            ${upload.status}
                        </span>
                    </td>
                    <td>${new Date(upload.upload_time).toLocaleString()}</td>
                </tr>
            `).join('')}
            ${recentUploads.length === 0 ? '<tr><td colspan="4" style="text-align: center;">No uploads yet</td></tr>' : ''}
        </tbody>
    </table>
</div>
` %>
<%- include('../layouts/main', { body: body }) %>